---
import { parse } from "node-html-parser";
import Tabs from "../tabs/Tabs";

const rowSlides = await Astro.slots.render("default");

const tabNames = Array.from(parse(rowSlides).querySelectorAll("tabname*")).map(
  (tabName) => {
    return {
      ...tabName,
      rawAttrs: { slot: tabName?.rawAttrs?.replace(/.*=/g, "") },
    };
  }
);
const tabContents = Array.from(
  parse(rowSlides).querySelectorAll("tabcontent*")
);
---

<Tabs client:visible sharedStore="astro-tabs">
  {
    tabNames.map((tabName, index) => {
      // doesn`t work with dynamic value for the "slot" prop
      return <Fragment slot="tab.1">Tab 1</Fragment>;
    })
  }
  {
    tabContents.map((tabContent, index) => {
      // doesn`t work with dynamic value for the "slot" prop
      return <Fragment slot="panel.1">Panel 1</Fragment>;
    })
  }
</Tabs>
